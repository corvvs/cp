# 問題: ARC063 E - 木と整数 / Integers on a Tree 

https://atcoder.jp/contests/arc063/tasks/arc063_c

# 要点だけ

- 適当に根を決める
- 根から再帰的に以下を実行:
  - ある頂点の直下の各頂点について、頂点に書ける数字の「偶奇」と「範囲」を求める。
    - ただし、「偶奇」は反転させ、「範囲」は上限下限を1つずつ広げる。
  - 頂点にすでに数字が書き込まれている場合、当該頂点自身の分として以下を加える:
    - 偶奇: 数字の偶奇
    - 範囲: その数字だけを含む閉区間
  - 1つも「偶奇」・「範囲」が得られなかった場合、その頂点の「偶奇」・「範囲」は**不定**とする
  - そうでない場合、すべての「偶奇」が揃っていることをチェックする。揃っていない場合はそこで`No`.
  - 得られた範囲の「上限の最小*1」、「下限の最大-1」をそれぞれ上限・下限とする範囲を計算する。適正でない(`上限 < 下限`)場合はそこで`No`.
  - 得られた「偶奇」「範囲」を、この頂点の「偶奇」「範囲」とする。
- この手続きが根まで終了した場合、答えは`Yes`となる。
- 根から順に数字を書き込んでいく。
- まず、根の数字は根の「範囲」から(根と「偶奇」が一致する数字を)自由に選んでよい。
  - `1 <= K`なので、根には必ず「範囲」が定まる。
- 面倒なので「範囲」の下限を書くことにする。
- 根の直下の頂点について、`根の数字±1`のうち頂点の「範囲」に含まれる数字を書き込む。
  - 「範囲」がない場合はどちらを書いてもよい。
- 以下、再帰的に繰り返す。


# 感想

- ロジックにはそこまで手こずらない(複雑ではある)が、実装がちょっと重い。
- `1 <= K`を見落としていたので余計な手間をかけている
- Rubyの等号`==`は左右の型が違ってもエラーを吐かない。可能なら不等号を使うと安全。
  - Rubyの`===`は[JS等におけるそれと違い「厳密な比較」という意味合いではない](https://docs.ruby-lang.org/ja/latest/method/Object/i/=3d=3d=3d.html)。



