# 問題: ARC042B

https://atcoder.jp/contests/arc042/tasks/arc042_b

# メモ

「点`(x,y)`から出発し、点`i`と点`i+1(mod N)`を結ぶ線分に達するまでの最短距離」の最小値が答え。

以後、点`i`と点`i+1(mod N)`の座標は、点`(x,y)`が原点に来るようにずらしたものとする。

「原点から出発し、点`i`と点`i+1`を結ぶ線分に達するまでの最短距離」は:

- 点`i`と点`i+1`を通る**直線**と、原点から直線に下ろした垂線が、点`i`と点`i+1`を結ぶ**線分**上にある場合
  - 最短距離で到達する点は、垂線との交点。

- そうでない場合
  - 最短距離で到達する点は、線分の端点のうち近い方。

以下、上記の判定と計算方法。

「点`i`と点`i+1`を結ぶ線分」がy軸(x軸でもよい)に平行になるように回転変換をかける。\
回転行列は、`dx = x[i+1] - x[i], dy = y[i+1] - y[i], a = 1/√(dx^2 + dy^2)`として、

```
ay -ax
ax  ay
```

と書ける。\
計算誤差を無視すると、`(x[i], y[i]), (x[i+1], y[i+1])`をこの行列で変換した結果について

- `x[i] == x[i+1] (>= 0)`
- `y[i] <= y[i+1]`

が成り立つ。

「点`i`と点`i+1`を通る**直線**と、原点から直線に下ろした垂線が、点`i`と点`i+1`を結ぶ**線分**上にある」かどうかは\
x軸が回転後の線分と交わるかどうか、つまり`y[i] <= 0 <= y[i+1]`と同値で、\
これが成立する時、垂線の大きさは`x[i] (= x[i+1])`となる。
