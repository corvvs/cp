# 問題

https://atcoder.jp/contests/agc004/tasks/agc004_d

# メモ

まず、首都のテレポーターは首都を向いている必要がある。\
そうでない場合、首都にいる人と「１回の移動で首都に行ける首都でない町」(題意より必ず存在する)にいる人は、\
同じ回数だけ移動しても同じ町にいることができない。

こうなると、テレポーターの転送先を変更する際は必ず首都にすればよいことになる。

後は、テレポーターの向き先を首都を根とする木を見て木DPを行う。\
具体的には、`dp[n] = 頂点nを根とする部分木の深さ`とし、\
`dp[n] + 1 == K`となったならば`dp[n] = 0`と置き直して変更回数を1増やす。

# 反省

Rubyの[tsort](https://docs.ruby-lang.org/ja/latest/library/tsort.html)は、\
少なくともAtCoder上のバージョンにおいては再帰で実装されているので、\
Rubyの再帰の深さ制限に影響される。\
つまり5000ちょっと程度の深さで落ちる。\
素直に自前実装するなり`tsort`コマンド使うなりするべき。

最初は線形代数問題だと思った・・・